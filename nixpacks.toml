# Nixpacks configuration for Django with MySQL
[phases.setup]
nixPkgs = [
    "python311",
    "gcc",
    "mysql80",
    "pkg-config",
    "cairo",
    "pango",
    "gdk-pixbuf",
    "libxml2",
    "libxslt",
    "libjpeg",
    "zlib"
]

# Install Python dependencies
[phases.install]
cmds = [
    "apt-get update",
    "apt-get install -y libreoffice libreoffice-writer",
    "pip install -r requirements.txt"
]

# Build phase
[phases.build]
cmds = ["python manage.py collectstatic --noinput"]

# Runtime start command
[start]
cmd = "gunicorn PTLT.wsgi --bind 0.0.0.0:$PORT --log-file -"
