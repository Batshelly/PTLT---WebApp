<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Instructor & Course</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    {% load static %}
    <link rel="stylesheet" href="{% static 'css/create_instructor.css' %}">
</head>
<body class="bg-light">

<!-- Navigation Bar -->
<div class="d-flex justify-content-between rounded-3 align-items-center mb-3 nav_top p-3 bg-white shadow-sm">
    <div class="d-flex align-items-center nav_links">
        <strong class="pe-3 me-3 fs-5 ptlt">PTLT</strong>
        <a href="/account_management" class="text-decoration-none pe-3 me-3 custom-link">Account Management</a>
        <a href="/class_management" class="text-decoration-none custom-link">Class Management</a>
        <a href="/create_instructor" class="text-decoration-none custom-link">Create Instructor</a>
    </div>
    <div class="d-flex align-items-center gap-2">
        
        <button class="btn m-2 logout_btn">Logout</button>
    </div>
</div>

<!-- Two-column Layout -->
<div class="container my-5">
    <div class="row g-4">

        <!-- Instructor Form -->
        <div class="col-lg-8">
            <div class="p-4 bg-white rounded-4 shadow-sm h-100">
                <h2 class="mb-4 text-center title">Create Instructor Account</h2>
                <form method="POST" id="createInstructorForm">
                    {% csrf_token %}
                    <input type="hidden" name="form_type" value="instructor_form">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <label for="user_id" class="form-label">User ID</label>
                            <input type="text" class="form-control" id="user_id" name="user_id" required>
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="first_name" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="first_name" name="first_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="last_name" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="last_name" name="last_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="sex" class="form-label">Sex</label>
                            <select class="form-select" id="sex" name="sex" required>
                                <option value="" disabled selected>Select</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="role" class="form-label">Role</label>
                            <select class="form-select" id="role" name="role" required>
                                <option value="Instructor" selected>Instructor</option>
                                <option value="Admin">Admin</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" name="password" required>
                        </div>
                    </div>
                    <div class="text-end mt-4">
                        <button type="button" class="btn btn-primary px-4" onclick="confirmInstructor()">Create Instructor</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Course Section Form -->
        <div class="col-lg-4">
            <div class="p-4 bg-white rounded-4 shadow-sm h-100">
                <h2 class="mb-4 text-center title">Create Course & Section</h2>
                <form method="POST" id="createCourseSectionForm">
                    {% csrf_token %}
                    <input type="hidden" name="form_type" value="course_section_form">
                    <div class="mb-3">
                        <label for="course_name" class="form-label">Course Name</label>
                        <input type="text" class="form-control" id="course_name" name="course_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="section_name" class="form-label">Section Name</label>
                        <input type="text" class="form-control" id="section_name" name="section_name" required>
                    </div>
                    <div class="text-end mt-4">
                        <button type="button" class="btn btn-success px-4" onclick="confirmCourse()">Create Section</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Confirmation Modal Template -->
<div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm Action</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="showCancelPopup()"></button>
      </div>
      <div class="modal-body" id="confirmText">
        Are you sure you want to proceed?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="showCancelPopup()">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirmActionBtn">Yes, Proceed</button>
      </div>
    </div>
  </div>
</div>

<!-- Success Modal -->
<div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content text-center p-3">
      <h5 class="text-success">✅ Success!</h5>
      <p class="mb-0">Your data has been saved.</p>
    </div>
  </div>
</div>

<!-- Cancel Modal -->
<div class="modal fade" id="cancelModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content text-center p-3">
      <h5 class="text-warning">❌ Cancelled</h5>
      <p class="mb-0">Submission was cancelled.</p>
    </div>
  </div>
</div>

<script>
    function confirmInstructor() {
        const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
        document.getElementById('confirmText').innerText = "Are you sure you want to create this instructor account?";
        document.getElementById('confirmActionBtn').onclick = () => {
            document.getElementById('createInstructorForm').submit();
        };
        modal.show();
    }

    function confirmCourse() {
        const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
        document.getElementById('confirmText').innerText = "Are you sure you want to create this course section?";
        document.getElementById('confirmActionBtn').onclick = () => {
            document.getElementById('createCourseSectionForm').submit();
        };
        modal.show();
    }

    function showCancelPopup() {
        const cancelModal = new bootstrap.Modal(document.getElementById('cancelModal'));
        cancelModal.show();
    }

    {% if messages %}
        {% for message in messages %}
            {% if message.tags == 'success' %}
                const success = new bootstrap.Modal(document.getElementById('successModal'));
                success.show();
            {% endif %}
        {% endfor %}
    {% endif %}
</script>

</body>
</html>
